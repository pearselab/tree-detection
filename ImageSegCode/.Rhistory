library(EBImage)
require('EBImage')
Image <- readImage('C:/Users/Michael/Documents/GitHub/tree-detection/gis/nasmp-background-images/first_transect-google.png')
display(Image)
Image <- Image[0:800, 0:800,]
display(Image)
colorMode(Image) <- Grayscale
display(Image)
threshold <- otsu(Image)
Image_th <-combine( mapply(function(frame, th) frame > th, getFrames(Image), threshold, SIMPLIFY=FALSE) )
display(Image_th, all=TRUE)
Image_label <- bwlabel(Image_th)
display(colorLabels(Image_label))
table(Image_label)
Image <- readImage('C:/Users/Michael/Documents/GitHub/tree-detection/gis/nasmp-background-images/first_transect-google.png')
display(Image)
Image <- Image[0:800, 0:800,]
display(Image)
colorMode(Image) <- Grayscale
display(Image)
threshold <- otsu(Image)
Image_th <-combine( mapply(function(frame, th) frame > th, getFrames(Image), threshold, SIMPLIFY=FALSE) )
display(Image_th, all=TRUE)
Image_th=opening(Image_th, makeBrush(3,shape = 'disc'))
Image_th = fillHull(Image_th)
Image_th = bwlabel(Image_th)
display(colorLabels(Image_th), all=TRUE)
imask = opening(Image>.1, makeBrush(3,shape = 'disc'))
cmask = propagate(Image, seeds=Image_th, mask = imask)
display(imask, all = true)
segmented = paintObjects(cmask,Image,col = 'red',thick=TRUE)
segmented= paintObjects(Image_th, segmented, col='blue',thick=TRUE)
display(segmented,all=TRUE)
library(EBImage)
require('EBImage')
Image <- readImage('C:/Users/Michael/Documents/GitHub/tree-detection/gis/nasmp-background-images/third_transect-google.png')
display(Image)
Image <- Image[0:800, 0:800,]
display(Image)
colorMode(Image) <- Grayscale
display(Image)
threshold <- otsu(Image)
Image_th <-combine( mapply(function(frame, th) frame > th, getFrames(Image), threshold, SIMPLIFY=FALSE) )
display(Image_th, all=TRUE)
Image_th=opening(Image_th, makeBrush(3,shape = 'disc'))
Image_th = fillHull(Image_th)
Image_th = bwlabel(Image_th)
display(colorLabels(Image_th), all=TRUE)
imask = opening(Image>.1, makeBrush(3,shape = 'disc'))
cmask = propagate(Image, seeds=Image_th, mask = imask)
display(imask, all = true)
segmented = paintObjects(cmask,Image,col = 'red',thick=TRUE)
segmented= paintObjects(Image_th, segmented, col='blue',thick=TRUE)
display(segmented,all=TRUE)
detectTree <- function(images, x, y){
#loading image file
Image <- readImage(images,convert=TRUE)
display(Image)
# changing the viewing frame of the image
Image <- Image[0:y, 0:x,]
#display(Image)
#The image must be in grayscale. Change to grayscale
colorMode(Image) <- Grayscale
#display(Image)
#Thresholding the image using the otsu function.
threshold <- otsu(Image)
#Will i am not sure what is going on here.
#If i understand it correctly, it is combining all the frames and thresholds into one image using the mapply function we learned
#about the other day in class. Could you clarify this step for me? thanks.
Image_th <-combine( mapply(function(frame, th) frame > th, getFrames(Image), threshold, SIMPLIFY=FALSE) )
#display(Image_th, all=TRUE)
Image_th=opening(Image_th, makeBrush(3,shape = 'disc'))
Image_th = fillHull(Image_th)
Image_th = bwlabel(Image_th)
#table(Image_th)
#display(colorLabels(Image_th), all=TRUE)
imask = opening(Image>.1, makeBrush(3,shape = 'disc'))
cmask = propagate(Image, seeds=Image_th, mask = imask)
#display(imask, all = true)
segmented = paintObjects(cmask,Image,col = "red",thick=TRUE)
segmented= paintObjects(Image_th, segmented, col='blue',thick=TRUE)
display(segmented,all=TRUE)
return(segmented)
}
Sat_Image <- 'C:/Users/Michael/Documents/GitHub/tree-detection/Test Satalitte image/q0421_sw_naip2016_rgb.tiff'
detectTree(Sat_Image,1000,1000)
library(EBImage)
require('EBImage')
hist(detectTree(Sat_Image,1000,1000))
